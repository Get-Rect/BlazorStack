@using BlazorStack.Portal.Auth
@using BlazorStack.Portal.Services
@using BlazorStack.Services
@using Blazored.LocalStorage
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components.Authorization

@page "/logout"
@inject ApplicationAPIService _api;
@inject NavigationManager _nav;
@inject ILocalStorageService _localStorage
@inject AuthenticationStateProvider _authState;
@inject IAccountManagement _account;
@attribute [Authorize]

@code {
    [SupplyParameterFromQuery(Name = "returnUrl")]
    public string? returnUrl { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await _account.Logout();
        StateHasChanged();
    }
}
